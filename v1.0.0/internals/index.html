<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Internals · DocumenterCitations.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://juliadocs.github.io/DocumenterCitations.jl/internals/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/citations.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">DocumenterCitations.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../syntax/">Syntax</a></li><li><a class="tocitem" href="../gallery/">Citation Style Gallery</a></li><li><a class="tocitem" href="../styling/">CSS Styling</a></li><li class="is-active"><a class="tocitem" href>Internals</a><ul class="internal"><li><a class="tocitem" href="#Citation-Pipeline"><span>Citation Pipeline</span></a></li><li><a class="tocitem" href="#customization"><span>Customization</span></a></li><li><a class="tocitem" href="#Debugging"><span>Debugging</span></a></li></ul></li><li><a class="tocitem" href="../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Internals</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Internals</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaDocs/DocumenterCitations.jl/blob/master/docs/src/internals.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Internals"><a class="docs-heading-anchor" href="#Internals">Internals</a><a id="Internals-1"></a><a class="docs-heading-anchor-permalink" href="#Internals" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-binding" id="DocumenterCitations.CitationBibliography" href="#DocumenterCitations.CitationBibliography"><code>DocumenterCitations.CitationBibliography</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Plugin for enabling bibliographic citations in Documenter.jl.</p><pre><code class="language-julia hljs">bib = CitationBibliography(bibfile; style=:numeric)</code></pre><p>instantiates a plugin that must be passed as an (undocumented!) positional argument to <a href="https://documenter.juliadocs.org/stable/lib/public/#Documenter.makedocs"><code>Documenter.makedocs</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>bibfile</code>: the name of the <a href="https://www.bibtex.com/g/bibtex-format/">BibTeX</a> file from which to read the data.</li><li><code>style</code>: the style to use for the bibliography and all citations. The available built-in styles are <code>:numeric</code> (default), <code>:authoryear</code>, and <code>:alpha</code>. With user-defined styles, this may be an arbitrary name or object.</li></ul><p><strong>Internal fields</strong></p><p>The following internal fields are used by the citation pipeline steps. These should not be considered part of the stable API.</p><ul><li><code>entries</code>: dict of citation keys to entries in <code>bibfile</code></li><li><code>citations</code>: ordered dict of citation key to citation number</li><li><code>page_citations</code>: dict of page file name to set of citation keys cited on page.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDocs/DocumenterCitations.jl/blob/a1bf28692a6fc66bcb34b904ced3d5ad18c9169c/src/DocumenterCitations.jl#L31-L59">source</a></section></article><h2 id="Citation-Pipeline"><a class="docs-heading-anchor" href="#Citation-Pipeline">Citation Pipeline</a><a id="Citation-Pipeline-1"></a><a class="docs-heading-anchor-permalink" href="#Citation-Pipeline" title="Permalink"></a></h2><p>The <a href="#DocumenterCitations.CitationBibliography"><code>DocumenterCitations.CitationBibliography</code></a> plugin hooks into the <a href="https://documenter.juliadocs.org/stable/lib/internals/builder/#Documenter.Builder.DocumentPipeline"><code>Documenter.Builder.DocumentPipeline</code></a><sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup> between <a href="https://documenter.juliadocs.org/stable/lib/internals/builder/#Documenter.Builder.ExpandTemplates"><code>ExpandTemplates</code></a> (which expands <code>@docs</code> blocks) and <a href="https://documenter.juliadocs.org/stable/lib/internals/builder/#Documenter.Builder.CrossReferences"><code>CrossReferences</code></a>. The plugin adds the following three steps:</p><ol><li><a href="#DocumenterCitations.CollectCitations"><code>CollectCitations</code></a></li><li><a href="#DocumenterCitations.ExpandBibliography"><code>ExpandBibliography</code></a></li><li><a href="#DocumenterCitations.ExpandCitations"><code>ExpandCitations</code></a></li></ol><article class="docstring"><header><a class="docstring-binding" id="DocumenterCitations.CollectCitations" href="#DocumenterCitations.CollectCitations"><code>DocumenterCitations.CollectCitations</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Pipeline step to collect citations from all pages.</p><p>It walks all pages in the order they appear in the navigation bar, looking for <code>@cite</code> links. It fills the <code>citations</code> and <code>page_citations</code> attributes of the internal <a href="#DocumenterCitations.CitationBibliography"><code>CitationBibliography</code></a> object.</p><p>Thus, the order in which <code>CollectCitations</code> encounters citations determines the numerical key that will appear in the rendered documentation (see <a href="#DocumenterCitations.ExpandBibliography"><code>ExpandBibliography</code></a> and <a href="#DocumenterCitations.ExpandCitations"><code>ExpandCitations</code></a>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDocs/DocumenterCitations.jl/blob/a1bf28692a6fc66bcb34b904ced3d5ad18c9169c/src/citations.jl#L6-L16">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DocumenterCitations.ExpandBibliography" href="#DocumenterCitations.ExpandBibliography"><code>DocumenterCitations.ExpandBibliography</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Pipeline step to expand all <code>@bibliography</code> blocks.</p><p>Runs after <a href="#DocumenterCitations.CollectCitations"><code>CollectCitations</code></a> but before <a href="#DocumenterCitations.ExpandCitations"><code>ExpandCitations</code></a>.</p><p>Each bibliography is rendered into HTML as a a <a href="https://www.w3schools.com/tags/tag_dl.asp">definition list</a>, a <a href="https://www.w3schools.com/tags/tag_ul.asp">bullet list</a>, or an <a href="https://www.w3schools.com/tags/tag_ol.asp">enumeration</a> depending on <a href="#DocumenterCitations.bib_html_list_style"><code>bib_html_list_style</code></a>. For a definition list, the label for each list item is rendered via <a href="#DocumenterCitations.format_bibliography_label"><code>format_bibliography_label</code></a> and the full bibliographic reference is rendered via <a href="#DocumenterCitations.format_bibliography_reference"><code>format_bibliography_reference</code></a>. For bullet lists or enumerations, <a href="#DocumenterCitations.format_bibliography_label"><code>format_bibliography_label</code></a> is not used and <a href="#DocumenterCitations.format_bibliography_reference"><code>format_bibliography_reference</code></a> fully determines the entry.</p><p>The order of the entries in the bibliography is determined by the <a href="#DocumenterCitations.bib_sorting"><code>bib_sorting</code></a> method for the chosen citation style.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDocs/DocumenterCitations.jl/blob/a1bf28692a6fc66bcb34b904ced3d5ad18c9169c/src/bibliography.jl#L1-L19">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DocumenterCitations.ExpandCitations" href="#DocumenterCitations.ExpandCitations"><code>DocumenterCitations.ExpandCitations</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Pipeline step to expand all <code>@cite</code> citations.</p><p>This runs after <a href="#DocumenterCitations.ExpandBibliography"><code>ExpandBibliography</code></a>, as it relies on the link targets in the expanded <code>@bibliography</code> blocks.</p><p>All citations are formatted using <a href="#DocumenterCitations.format_citation"><code>format_citation</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDocs/DocumenterCitations.jl/blob/a1bf28692a6fc66bcb34b904ced3d5ad18c9169c/src/citations.jl#L168-L175">source</a></section></article><h2 id="customization"><a class="docs-heading-anchor" href="#customization">Customization</a><a id="customization-1"></a><a class="docs-heading-anchor-permalink" href="#customization" title="Permalink"></a></h2><p>A custom style can be created by defining methods for functions listed below that specialize for a user-defined <code>style</code> argument to <a href="#DocumenterCitations.CitationBibliography"><code>CitationBibliography</code></a>. If the <code>style</code> is identified by a simple name, e.g. <code>:mystyle</code>, the method should specialize on <code>Val{:mystyle}</code>, see the <a href="../gallery/#custom_styles">examples for custom styles</a>. Beyond that, e.g., if the <code>style</code> needs to implement options or needs to maintain internal state to manage unique citation labels, <code>style</code> can be an object of a custom type.</p><article class="docstring"><header><a class="docstring-binding" id="DocumenterCitations.bib_html_list_style" href="#DocumenterCitations.bib_html_list_style"><code>DocumenterCitations.bib_html_list_style</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Identify the type of HTML list associated with a bibliographic style.</p><pre><code class="language-julia hljs">bib_html_list_style(style)</code></pre><p>must return one of</p><ul><li><code>:dl</code> (definition list),</li><li><code>:ul</code> (unordered / bullet list), or</li><li><code>:ol</code> (ordered list / enumeration),</li></ul><p>for any <code>style</code> that <a href="#DocumenterCitations.CitationBibliography"><code>CitationBibliography</code></a> is instantiated with.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDocs/DocumenterCitations.jl/blob/a1bf28692a6fc66bcb34b904ced3d5ad18c9169c/src/bibliography.jl#L128-L142">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DocumenterCitations.bib_sorting" href="#DocumenterCitations.bib_sorting"><code>DocumenterCitations.bib_sorting</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Identify the sorting associated with a bibliographic style.</p><pre><code class="nohighlight hljs">bib_sorting(style)</code></pre><p>must return <code>:citation</code> or any of the <code>sorting_rules</code> accepted by <a href="https://humans-of-julia.github.io/Bibliography.jl/dev/#Bibliography.sort_bibliography!"><code>Bibliography.sort_bibliography!</code></a>, e.g. <code>:nyt</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDocs/DocumenterCitations.jl/blob/a1bf28692a6fc66bcb34b904ced3d5ad18c9169c/src/bibliography.jl#L148-L158">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DocumenterCitations.format_bibliography_label" href="#DocumenterCitations.format_bibliography_label"><code>DocumenterCitations.format_bibliography_label</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Format the label for an entry in a <code>@bibliography</code> block.</p><pre><code class="language-julia hljs">format_bibliography_label(style, entry, citations)</code></pre><p>produces a string for the label in the bibliography for the given <a href="https://humans-of-julia.github.io/Bibliography.jl/stable/internal/#BibInternal.Entry"><code>Bibliography.Entry</code></a>. The <code>citations</code> argument is a dict that maps citation keys (<code>entry.id</code>) to the order in which citations appear in the documentation, i.e., a numeric citation key.</p><p>For the default <code>style=:numeric</code>, this returns a label that is the numeric citation key in square brackets, cf. <a href="#DocumenterCitations.format_citation"><code>format_citation</code></a>. In general, this function is used only if <a href="#DocumenterCitations.bib_html_list_style"><code>bib_html_list_style</code></a> returns <code>:dl</code> for the given <code>style</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDocs/DocumenterCitations.jl/blob/a1bf28692a6fc66bcb34b904ced3d5ad18c9169c/src/bibliography.jl#L82-L99">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DocumenterCitations.format_bibliography_reference" href="#DocumenterCitations.format_bibliography_reference"><code>DocumenterCitations.format_bibliography_reference</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Format the full reference for an entry in a <code>@bibliography</code> block.</p><pre><code class="language-julia hljs">format_bibliography_reference(style, entry)</code></pre><p>produces an HTML string for the full reference of a <a href="https://humans-of-julia.github.io/Bibliography.jl/stable/internal/#BibInternal.Entry"><code>Bibliography.Entry</code></a>. For the default <code>style=:numeric</code>, the result is formatted like in <a href="https://www.ctan.org/tex-archive/macros/latex/contrib/revtex/auguide">REVTeX</a> and <a href="https://journals.aps.org">APS journals</a>. That is, the full list of authors with initials for the first names, the italicized tile, and the journal reference (linking to the DOI, if available), ending with the publication year in parenthesis.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDocs/DocumenterCitations.jl/blob/a1bf28692a6fc66bcb34b904ced3d5ad18c9169c/src/bibliography.jl#L40-L55">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DocumenterCitations.format_citation" href="#DocumenterCitations.format_citation"><code>DocumenterCitations.format_citation</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Format a <code>@cite</code> citation.</p><pre><code class="language-julia hljs">text = format_citation(
    style,
    entry,
    citations;
    note=nothing,
    cite_cmd=:cite,
    capitalize=false,
    starred=false
)</code></pre><p>returns a string that replaces the link text for a markdown citation (<code>[key](@cite)</code> and its variations, see <a href="../syntax/#Syntax-for-Citations">Syntax for Citations</a> and the <a href="../gallery/#gallery">Citation Style Gallery</a>).</p><p>For the default <code>style=:numeric</code> and <code>[key](@cite)</code>, this returns a label that is the numeric citation key in square brackets, cf. <a href="#DocumenterCitations.format_bibliography_label"><code>format_bibliography_label</code></a>.</p><p><strong>Argument</strong></p><ul><li><code>style</code>: The style  to render the citation in, as passed to <a href="#DocumenterCitations.CitationBibliography"><code>CitationBibliography</code></a></li><li><code>entry</code>: The <a href="https://humans-of-julia.github.io/Bibliography.jl/stable/internal/#BibInternal.Entry"><code>Bibliography.Entry</code></a> that is being cited</li><li><code>citations</code>: A dict that maps citation keys (<code>entry.id</code>) to the order in which citations appear in the documentation, i.e., a numeric citation index</li><li><code>note</code>: A citation note, e.g. &quot;Eq. (1)&quot; in <code>[GoerzQ2022; Eq. (1)](@cite)</code></li><li><code>cite_cmd</code>: The citation command, one of <code>:cite</code>, <code>:citet</code>, <code>:citep</code>. Note that, e.g., <code>[Goerz@2022](@Citet*)</code> results in <code>cite_cmd=:citet</code></li><li><code>capitalize</code>: Whether the citation should be formatted to appear at the start of a sentence, as indicated by a capitalized <code>@Cite...</code> command, e.g., <code>[GoerzQ2022](@Citet*)</code></li><li><code>starred</code>: Whether the citation should be rendered in &quot;extended&quot; form, i.e., with the full list of authors, as indicated by a <code>*</code> in the citation, e.g., <code>[Goerz@2022](@Citet*)</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDocs/DocumenterCitations.jl/blob/a1bf28692a6fc66bcb34b904ced3d5ad18c9169c/src/citations.jl#L200-L240">source</a></section></article><h2 id="Debugging"><a class="docs-heading-anchor" href="#Debugging">Debugging</a><a id="Debugging-1"></a><a class="docs-heading-anchor-permalink" href="#Debugging" title="Permalink"></a></h2><p>Set the environment variable <code>JULIA_DEBUG=Documenter,DocumenterCitations</code> before generating the documentation.</p><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a>See the documentation of <a href="https://documenter.juliadocs.org/stable/lib/internals/selectors/#Documenter.Utilities.Selectors"><code>Documenter.Utilities.Selectors</code></a> for an explanation of Documenter&#39;s pipeline concept.</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../styling/">« CSS Styling</a><a class="docs-footer-nextpage" href="../references/">References »</a><div class="flexbox-break"></div><p class="footer-message"><a href="https://github.com/JuliaDocs/DocumenterCitations.jl">DocumenterCitations.jl</a> v1.0.0 docs powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Wednesday 12 July 2023 21:28">Wednesday 12 July 2023</span>. Using Julia version 1.9.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
